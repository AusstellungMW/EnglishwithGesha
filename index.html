<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EN text with RU tooltip</title>
  <style>
    :root{
      --bg:#000;
      --fg:#fff;
      --maxw: 980px;

      --bubble-bg: rgba(255,255,255,0.95);
      --bubble-fg:#000;
      --bubble-shadow: 0 10px 26px rgba(0,0,0,0.65);
      --bubble-radius: 14px;
    }

    html, body { height: 100%; }
    body{
      margin:0;
      background:var(--bg);
      color:var(--fg);
      font-family: "Segoe UI", Arial, sans-serif;
    }

    .wrap{
      max-width: var(--maxw);
      margin: 0 auto;
      padding: 44px 22px 70px;
    }

    h1{
      margin: 0 0 18px 0;
      font-size: 20px;
      font-weight: 600;
      opacity: 0.85;
      letter-spacing: 0.2px;
    }

    .text{
      font-size: 34px;
      line-height: 1.65;
      letter-spacing: 0.2px;
    }

    p{ margin: 0 0 18px 0; }

    .phrase{
      display:inline;
      padding: 2px 6px;
      border-radius: 8px;
      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
      outline: none;
    }

    .phrase:hover,
    .phrase.is-active{
      background: rgba(255,255,255,0.10);
    }

    @media (max-width: 520px){
      .text{ font-size: 28px; }
    }

    .hint{
      margin-top: 26px;
      font-size: 16px;
      opacity: 0.70;
    }

    /* Реальное облачко */
    #tooltip{
      position: fixed; /* важно: стабильно при скролле */
      left: 0;
      top: 0;
      max-width: min(560px, 92vw);
      background: var(--bubble-bg);
      color: var(--bubble-fg);
      padding: 10px 12px;
      border-radius: var(--bubble-radius);
      box-shadow: var(--bubble-shadow);
      font-size: 18px;
      line-height: 1.35;
      z-index: 9999;
      opacity: 0;
      transform: translateY(6px);
      pointer-events: none;
      transition: opacity 120ms ease, transform 120ms ease;
      white-space: normal;
    }

    #tooltip.show{
      opacity: 1;
      transform: translateY(0);
    }

    /* “хвостик” облачка */
    #tooltip::after{
      content:"";
      position:absolute;
      width: 0; height: 0;
      border: 8px solid transparent;
      border-top-color: var(--bubble-bg);
      left: 18px;
      bottom: -16px;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,0.25));
    }
  </style>
</head>

<body>
  <div class="wrap">
    <h1>Hover (PC) or tap (phone) a sentence to see the Russian translation</h1>

    <div class="text" id="text">
      <p><span class="phrase" data-ru="Мы живем в двенадцатиэтажном здании в центральной части города.">We live in a 12-story building in the central part of the city.</span></p>
      <p><span class="phrase" data-ru="Позвольте мне рассказать про нашу квартиру.">Let me tell you about our apartment.</span></p>
      <p><span class="phrase" data-ru="Мы живем на втором этаже, поэтому обычно не пользуемся лифтом.">We live on the second floor, so usually we do not use the elevator.</span></p>
      <p><span class="phrase" data-ru="В квартире четыре комнаты — комната моих родителей, комната моего младшего брата, комната, где я живу, и гостиная.">There are four rooms in the apartment – my parents’ room, my little brother’s room, the room where I live, and the living room.</span></p>
      <p><span class="phrase" data-ru="А также, конечно, уютная кухня и ванная.">There are also, of course, a cozy kitchen and a bathroom.</span></p>
      <p><span class="phrase" data-ru="Кухня — маленькая, но, как я сказал ранее, довольно уютная.">The kitchen is small, but, as I said before, quite cozy.</span></p>
      <p><span class="phrase" data-ru="Там есть плита, холодильник, чайник, микроволновая печь, стол и стулья.">There is a stove, fridge, kettle, microwave, table and chairs there.</span></p>
      <p><span class="phrase" data-ru="У нас также есть много кухонных принадлежностей вроде ножей, черпаков и так далее.">We also have a lot of kitchen utensils such as knives, ladles and so on.</span></p>
      <p><span class="phrase" data-ru="На стене висит портрет моей мамы.">There is my mom’s portrait hanging on the wall.</span></p>
      <p><span class="phrase" data-ru="Портрет очень хороший, мой отец нарисовал его много лет назад, когда они познакомились.">The portrait is very good, my father drew it many years ago when they met.</span></p>
      <p><span class="phrase" data-ru="Самая большая комната в квартире — это гостиная.">The biggest room in the apartment is the living room.</span></p>
      <p><span class="phrase" data-ru="Там мы смотрим телевизор по вечерам, мой младший братик играет там в видеоигры.">This is where we watch TV in the evening, my little brother plays videogames there.</span></p>
      <p><span class="phrase" data-ru="Комната родителей тоже большая, у них есть свой телевизор.">My parents’ room is also big, and they have their own TV.</span></p>
      <p><span class="phrase" data-ru="Если мой брат или я хотим посмотреть что-то, что они не смотрят, они могут позволить нам воспользоваться телевизором в гостиной, а сами будут смотреть свой любимый сериал у себя в комнате.">If my brother or I want to watch something they do not watch, they might let us use the living room TV and watch their favorite show in their room.</span></p>
      <p><span class="phrase" data-ru="Им нравятся детективы про полицию, мне нравятся фэнтези-сериалы, а моему брату — мультики.">They love police procedurals, I like fantasy series, and my brother likes cartoons.</span></p>
      <p><span class="phrase" data-ru="У моего брата маленькая комната.">My brother has a small room.</span></p>
      <p><span class="phrase" data-ru="Там есть шкаф, полный игрушек и Лего.">There is a big closet full of toys and Lego there.</span></p>
      <p><span class="phrase" data-ru="Моя комната тоже небольшая, у меня есть компьютерный стол.">My room is not big either, I have a computer desk.</span></p>
      <p><span class="phrase" data-ru="Там я делаю уроки.">This is where I do my homework.</span></p>
      <p><span class="phrase" data-ru="Что касается ванной, то там не просто туалет и ванна, там еще есть кошачий лоток.">As for the bathroom, there is not just a toilet and bathtub, there is also a cat litter box there.</span></p>
      <p><span class="phrase" data-ru="У нас есть кошка, ее зовут Лили, и у нее нет комнаты, потому что вся квартира — это ее комната.">We have a cat, her name is Lilly, and she does not have a room, because the whole apartment is her room.</span></p>
      <p><span class="phrase" data-ru="Мы живем в этой квартире с тех пор, как я был маленьким, и мне она очень нравится.">We’ve been living in this apartment since I was little, and I really like it.</span></p>
      <p><span class="phrase" data-ru="Когда я перееду отсюда когда-нибудь, надеюсь, что я буду жить в квартире похожей на эту.">When I move out someday, I hope I will live in an apartment like this one.</span></p>

      <div class="hint">Phone: tap a sentence. Tap empty space to hide. PC: hover a sentence.</div>
    </div>
  </div>

  <div id="tooltip" role="tooltip" aria-hidden="true"></div>

  <script>
    const tooltip = document.getElementById("tooltip");
    const phrases = Array.from(document.querySelectorAll(".phrase"));

    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

    function hideTooltip(){
      tooltip.classList.remove("show");
      tooltip.setAttribute("aria-hidden", "true");
      phrases.forEach(p => p.classList.remove("is-active"));
    }

    function showTooltipFor(el){
      const text = el.getAttribute("data-ru") || "";
      if (!text.trim()) return;

      tooltip.textContent = text;
      tooltip.classList.add("show");
      tooltip.setAttribute("aria-hidden", "false");

      // позиционирование (фиксированное относительно окна)
      const r = el.getBoundingClientRect();

      // сначала поставим “примерно” сверху по центру
      // потом “подожмём” чтобы не вылезало за края
      const pad = 10;

      // временно сделаем видимым, чтобы измерить размеры
      // (оно уже show, значит размеры будут)
      const tw = tooltip.offsetWidth;
      const th = tooltip.offsetHeight;

      // хотим по центру над фразой
      let x = r.left + (r.width / 2) - (tw / 2);
      let y = r.top - th - 14; // 14px зазор + хвостик

      // если сверху не помещается, показываем снизу
      if (y < pad) {
        y = r.bottom + 14;
        // хвостик по умолчанию снизу облачка (направлен вниз),
        // для нижнего варианта его не переворачиваем, это не критично визуально.
      }

      x = clamp(x, pad, window.innerWidth - tw - pad);
      y = clamp(y, pad, window.innerHeight - th - pad);

      tooltip.style.left = x + "px";
      tooltip.style.top  = y + "px";
    }

    // ПК: hover
    phrases.forEach(el => {
      el.addEventListener("mouseenter", () => showTooltipFor(el));
      el.addEventListener("mousemove",  () => showTooltipFor(el));
      el.addEventListener("mouseleave", () => hideTooltip());
    });

    // Телефон/планшет: tap
    phrases.forEach(el => {
      el.addEventListener("click", (e) => {
        const isActive = el.classList.contains("is-active");
        hideTooltip();
        if (!isActive){
          el.classList.add("is-active");
          showTooltipFor(el);
        }
        e.stopPropagation();
      });
    });

    // тап по пустому месту = закрыть
    document.addEventListener("click", () => hideTooltip());
    window.addEventListener("scroll", () => {
      // чтобы облако не “зависало” при прокрутке
      if (tooltip.classList.contains("show")) hideTooltip();
    }, {passive:true});
    window.addEventListener("resize", () => {
      if (tooltip.classList.contains("show")) hideTooltip();
    });
  </script>
</body>
</html>
