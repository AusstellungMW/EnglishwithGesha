<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EN text with RU tooltip</title>

  <style>
    :root{
      --bg:#0b0c10;
      --fg:#f3f4f6;
      --muted: rgba(243,244,246,0.72);
      --maxw: 920px;

      --accent: rgba(255,255,255,0.10);
      --accent2: rgba(255,255,255,0.14);

      --bubble-bg: rgba(255,255,255,0.96);
      --bubble-fg:#0b0c10;
      --bubble-shadow: 0 14px 34px rgba(0,0,0,0.55);
      --bubble-radius: 16px;

      --pad: 14px;
    }

    html, body{ height: 100%; }
    body{
      margin:0;
      background: radial-gradient(1200px 800px at 20% -10%, rgba(255,255,255,0.06), transparent 60%),
                  radial-gradient(900px 700px at 90% 10%, rgba(255,255,255,0.04), transparent 55%),
                  var(--bg);
      color:var(--fg);
      font-family: "Segoe UI", system-ui, -apple-system, Arial, sans-serif;
      text-rendering: optimizeLegibility;
    }

    .wrap{
      max-width: var(--maxw);
      margin: 0 auto;
      padding: 44px 22px 70px;
    }

    header{
      display:flex;
      flex-direction:column;
      gap: 8px;
      margin-bottom: 22px;
    }

    h1{
      margin:0;
      font-size: 18px;
      font-weight: 650;
      letter-spacing: 0.3px;
      opacity: 0.92;
    }

    .sub{
      margin:0;
      font-size: 14px;
      color: var(--muted);
      line-height: 1.35;
    }

    .card{
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(255,255,255,0.03);
      border-radius: 20px;
      padding: 26px 22px;
      box-shadow: 0 18px 60px rgba(0,0,0,0.35);
      backdrop-filter: blur(6px);
    }

    .text{
      font-size: 22px;     /* меньше, чем было */
      line-height: 1.75;
      letter-spacing: 0.15px;
    }

    p{ margin: 0 0 16px 0; }
    p:last-child{ margin-bottom: 0; }

 .phrase{
  display:inline-block;          /* отдельный “токен” */
  padding: 2px 6px;
  border-radius: 10px;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  transition: background 120ms ease;
}

.phrase:hover,
.phrase.is-active{
  background: rgba(255,255,255,0.10);
}

    .hint{
      margin-top: 18px;
      font-size: 13px;
      color: var(--muted);
    }

    @media (max-width: 520px){
      .text{ font-size: 20px; }
      .card{ padding: 22px 16px; }
    }

    /* Tooltip */
    #tooltip{
      position: fixed;
      left: 0;
      top: 0;
      max-width: min(560px, calc(100vw - 2*var(--pad)));
      background: var(--bubble-bg);
      color: var(--bubble-fg);
      padding: 12px 14px;
      border-radius: var(--bubble-radius);
      box-shadow: var(--bubble-shadow);
      font-size: 16px;
      line-height: 1.35;
      z-index: 9999;

      opacity: 0;
      transform: translateY(6px);
      pointer-events: none;
      transition: opacity 140ms ease, transform 140ms ease;
      white-space: normal;
    }

    #tooltip.show{
      opacity: 1;
      transform: translateY(0);
    }

    /* хвостик, мы будем переключать классом: top или bottom */
    #tooltip::after{
      content:"";
      position:absolute;
      width: 0; height: 0;
      border: 8px solid transparent;
      filter: drop-shadow(0 8px 12px rgba(0,0,0,0.25));
    }

    /* облачко над фразой => хвостик снизу, указывает вниз */
    #tooltip.pos-top::after{
      border-top-color: var(--bubble-bg);
      left: var(--arrow-left, 24px);
      bottom: -16px;
    }

    /* облачко под фразой => хвостик сверху, указывает вверх */
    #tooltip.pos-bottom::after{
      border-bottom-color: var(--bubble-bg);
      left: var(--arrow-left, 24px);
      top: -16px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <h1></h1>
      <p class="sub"></p>
    </header>

    <div class="card">
      <div class="text" id="text">

<p>
<span class="phrase" data-ru="Мы">We</span>
<span class="phrase" data-ru="живём">live</span>
<span class="phrase" data-ru="в">in</span>
<span class="phrase" data-ru="одном">a</span>
<span class="phrase" data-ru="двенадцатиэтажном">12-story</span>
<span class="phrase" data-ru="здании">building</span>
<span class="phrase" data-ru="в">in</span>
<span class="phrase" data-ru="центральной">the central</span>
<span class="phrase" data-ru="части">part</span>
<span class="phrase" data-ru="города">of the city</span>.
</p>

<p>
<span class="phrase" data-ru="Позволь">Let</span>
<span class="phrase" data-ru="мне">me</span>
<span class="phrase" data-ru="рассказать">tell</span>
<span class="phrase" data-ru="тебе">you</span>
<span class="phrase" data-ru="о">about</span>
<span class="phrase" data-ru="нашей">our</span>
<span class="phrase" data-ru="квартире">apartment</span>.
</p>

<p>
<span class="phrase" data-ru="Мы">We</span>
<span class="phrase" data-ru="живём">live</span>
<span class="phrase" data-ru="на">on</span>
<span class="phrase" data-ru="втором">the second</span>
<span class="phrase" data-ru="этаже">floor</span>,
<span class="phrase" data-ru="поэтому">so</span>
<span class="phrase" data-ru="обычно">usually</span>
<span class="phrase" data-ru="мы">we</span>
<span class="phrase" data-ru="не">do not</span>
<span class="phrase" data-ru="используем">use</span>
<span class="phrase" data-ru="лифт">the elevator</span>.
</p>

<p>
  <span class="phrase" data-ru="Там">There</span>
  <span class="phrase" data-ru="есть">are</span>
  <span class="phrase" data-ru="четыре">four</span>
  <span class="phrase" data-ru="комнаты">rooms</span>
  <span class="phrase" data-ru="в">in</span>
  <span class="phrase" data-ru="(этой)">the</span>
  <span class="phrase" data-ru="квартире">apartment</span>
  –
  <span class="phrase" data-ru="моя">my</span>
  <span class="phrase" data-ru="родителей">parents’</span>
  <span class="phrase" data-ru="комната">room</span>,
  <span class="phrase" data-ru="моего">my</span>
  <span class="phrase" data-ru="маленького">little</span>
  <span class="phrase" data-ru="брата">brother’s</span>
  <span class="phrase" data-ru="комната">room</span>,
  <span class="phrase" data-ru="комната">the</span>
  <span class="phrase" data-ru="комната">room</span>
  <span class="phrase" data-ru="где">where</span>
  <span class="phrase" data-ru="я">I</span>
  <span class="phrase" data-ru="живу">live</span>,
  <span class="phrase" data-ru="и">and</span>
  <span class="phrase" data-ru="(эта)">the</span>
  <span class="phrase" data-ru="гостиная">living</span>
  <span class="phrase" data-ru="комната">room</span>.
</p>


<p>
<span class="phrase" data-ru="Есть">There are</span>
<span class="phrase" data-ru="также">also</span>,
<span class="phrase" data-ru="конечно">of course</span>,
<span class="phrase" data-ru="уютная">a cozy</span>
<span class="phrase" data-ru="кухня">kitchen</span>
<span class="phrase" data-ru="и">and</span>
<span class="phrase" data-ru="ванная">a bathroom</span>.
</p>

<p>
<span class="phrase" data-ru="Кухня">The kitchen</span>
<span class="phrase" data-ru="маленькая">is small</span>,
<span class="phrase" data-ru="но">but</span>,
<span class="phrase" data-ru="как">as</span>
<span class="phrase" data-ru="я">I</span>
<span class="phrase" data-ru="говорил">said</span>
<span class="phrase" data-ru="раньше">before</span>,
<span class="phrase" data-ru="довольно">quite</span>
<span class="phrase" data-ru="уютная">cozy</span>.
</p>

<p>
<span class="phrase" data-ru="Там">There</span>
<span class="phrase" data-ru="есть">is</span>
<span class="phrase" data-ru="плита">a stove</span>,
<span class="phrase" data-ru="холодильник">fridge</span>,
<span class="phrase" data-ru="чайник">kettle</span>,
<span class="phrase" data-ru="микроволновка">microwave</span>,
<span class="phrase" data-ru="стол">table</span>
<span class="phrase" data-ru="и">and</span>
<span class="phrase" data-ru="стулья">chairs</span>
<span class="phrase" data-ru="там">there</span>.
</p>

<p>
<span class="phrase" data-ru="Мы">We</span>
<span class="phrase" data-ru="также">also</span>
<span class="phrase" data-ru="имеем">have</span>
<span class="phrase" data-ru="много">a lot of</span>
<span class="phrase" data-ru="кухонных">kitchen</span>
<span class="phrase" data-ru="принадлежностей">utensils</span>
<span class="phrase" data-ru="таких как">such as</span>
<span class="phrase" data-ru="ножи">knives</span>,
<span class="phrase" data-ru="черпаки">ladles</span>
<span class="phrase" data-ru="и">and</span>
<span class="phrase" data-ru="так далее">so on</span>.
</p>

<p>
<span class="phrase" data-ru="Есть">There is</span>
<span class="phrase" data-ru="портрет">my mom’s portrait</span>
<span class="phrase" data-ru="висящий">hanging</span>
<span class="phrase" data-ru="на">on</span>
<span class="phrase" data-ru="стене">the wall</span>.
</p>

<p>
<span class="phrase" data-ru="Портрет">The portrait</span>
<span class="phrase" data-ru="очень">is very</span>
<span class="phrase" data-ru="хороший">good</span>,
<span class="phrase" data-ru="мой">my</span>
<span class="phrase" data-ru="отец">father</span>
<span class="phrase" data-ru="нарисовал">drew</span>
<span class="phrase" data-ru="его">it</span>
<span class="phrase" data-ru="много">many</span>
<span class="phrase" data-ru="лет">years</span>
<span class="phrase" data-ru="назад">ago</span>
<span class="phrase" data-ru="когда">when</span>
<span class="phrase" data-ru="они">they</span>
<span class="phrase" data-ru="познакомились">met</span>.
</p>

<p>
<span class="phrase" data-ru="Самая">The biggest</span>
<span class="phrase" data-ru="комната">room</span>
<span class="phrase" data-ru="в">in</span>
<span class="phrase" data-ru="квартире">the apartment</span>
<span class="phrase" data-ru="это">is</span>
<span class="phrase" data-ru="гостиная">the living room</span>.
</p>

<p>
<span class="phrase" data-ru="Здесь">This</span>
<span class="phrase" data-ru="это">is</span>
<span class="phrase" data-ru="где">where</span>
<span class="phrase" data-ru="мы">we</span>
<span class="phrase" data-ru="смотрим">watch</span>
<span class="phrase" data-ru="телевизор">TV</span>
<span class="phrase" data-ru="по вечерам">in the evening</span>,
<span class="phrase" data-ru="мой">my</span>
<span class="phrase" data-ru="младший брат">little brother</span>
<span class="phrase" data-ru="играет">plays</span>
<span class="phrase" data-ru="в">in</span>
<span class="phrase" data-ru="видеоигры">videogames</span>
<span class="phrase" data-ru="там">there</span>.
</p>

</div>


        <div class="hint"></div>
      </div>
    </div>
  </div>

  <div id="tooltip" role="tooltip" aria-hidden="true"></div>

  <script>
  const tooltip = document.getElementById("tooltip");
  const PAD = 14, GAP = 12, ARROW_PAD = 18;

  function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

  function hideTooltip(){
    tooltip.classList.remove("show", "pos-top", "pos-bottom");
    tooltip.setAttribute("aria-hidden", "true");
    document.querySelectorAll(".phrase.is-active").forEach(w => w.classList.remove("is-active"));
  }

  function showTooltipFor(el){
    const text = el.getAttribute("data-ru") || "";
    if (!text.trim()) return;

    tooltip.textContent = text;
    tooltip.classList.add("show");
    tooltip.setAttribute("aria-hidden", "false");

    const r = el.getBoundingClientRect();
    const tw = tooltip.offsetWidth;
    const th = tooltip.offsetHeight;

    const spaceAbove = r.top;
    const spaceBelow = window.innerHeight - r.bottom;

    let place = "top";
    if (spaceAbove < th + GAP + PAD && spaceBelow > spaceAbove) place = "bottom";

    tooltip.classList.remove("pos-top", "pos-bottom");
    tooltip.classList.add(place === "top" ? "pos-top" : "pos-bottom");

    let x = r.left + (r.width / 2) - (tw / 2);
    x = clamp(x, PAD, window.innerWidth - tw - PAD);

    let y = (place === "top") ? (r.top - th - GAP) : (r.bottom + GAP);
    y = clamp(y, PAD, window.innerHeight - th - PAD);

    tooltip.style.left = x + "px";
    tooltip.style.top  = y + "px";

    const targetX = r.left + r.width / 2;
    let arrowLeft = targetX - x;
    arrowLeft = clamp(arrowLeft, ARROW_PAD, tw - ARROW_PAD);
    tooltip.style.setProperty("--arrow-left", arrowLeft + "px");
  }

  // Hover / pen / mouse
  document.addEventListener("pointerover", (e) => {
    const el = e.target.closest(".phrase");
    if (!el) return;
    showTooltipFor(el);
  });

  document.addEventListener("pointerout", (e) => {
    const from = e.target.closest(".phrase");
    const to = e.relatedTarget && e.relatedTarget.closest ? e.relatedTarget.closest(".phrase") : null;
    if (from && !to) hideTooltip();
  });

  // Tap/click (mobile)
  document.addEventListener("click", (e) => {
    const el = e.target.closest(".phrase");
    if (!el) { hideTooltip(); return; }

    const isActive = el.classList.contains("is-active");
    hideTooltip();
    if (!isActive){
      el.classList.add("is-active");
      showTooltipFor(el);
    }
    e.stopPropagation();
  });

  window.addEventListener("scroll", () => {
    if (tooltip.classList.contains("show")) hideTooltip();
  }, {passive:true});

  window.addEventListener("resize", () => {
    if (tooltip.classList.contains("show")) hideTooltip();
  });
</script>

</body>
</html>
